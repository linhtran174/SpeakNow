<html lang="en-VN">
<head>
<style>
	button{
		border: none;
		height: 40px;
	}
	h3{
		margin: 0;
	}
</style>

</head>

<body style="margin: 0;">
	<div id="notiBox" style="opacity: 0.8; border-radius: 7px; display: none; position: fixed; padding: 7px; z-index: 10; top: 20px;"></div>

	<div id="reception">
		<div style="width: 30%; display: inline-block; height: 400px">
		</div><div style="width: 40%; display: inline-block; vertical-align: top">
			<h3 style="text-align: center"> SpeakNOW! - practice speaking with strangers</h3>
			<div>Email:</div>
			<input style="width: 100%" type="text" id="email"><br>
		  	<div>Password:</div>
		  	<input style="width: 100%" type="password" id="password"><br>
			<input type="submit" value="Login" onclick="logIn(this)">
			<input type="submit" value="Sign up" onclick="signUp(this)">
		</div><div style = "width: 30%; display: inline-block; height: 400px">
		</div>	
	</div>

	<div id ="dashboard"></div>
	
	
<script type="text/javascript" src="/browserLib"></script>
<script type="text/javascript">

	var serverUrl = "https://xseed.tech";

	function logIn(){
		var params = {
			email : $("email").value,
			password : $("password").value
		};
		send(serverUrl + "/login", params, (response)=>{
			console.log(response);
			if(response.status == "success"){
				localStorage['authToken'] = response.token;
			}
			else{
				noti(response.message, "lightpink")
			}
		});
	}

	function signUp(){

		var params = {
			email : $("email").value,
			password : $("password").value
		};
		send(serverUrl + "/signup", params, (response)=>{
			console.log(response)
			if(response.status == "success"){
				localStorage['authToken'] = response.token;
				noti(response.message, "lightgreen", 4)
			}
			else{
				noti(response.message, "lightpink", 4)
			}
		});
	}

	var notiBox = $("notiBox")
	function noti(text, color, timeoutSecond){
		notiBox.style.backgroundColor = color;
		notiBox.style.display = "block";
		notiBox.innerHTML = text;
		setTimeout(()=>{
			notiBox.style.display = "none"
			notiBox.style.backgroundColor = "white";
		}, timeout * 1000)
	}

</script>

</body>
</html>
